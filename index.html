<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radiosender-Finder & Ratespiel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }
        .container {
            background-color: #ffffff;
            border-radius: 1.5rem;
            padding: 2.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-width: 28rem;
            width: 100%;
            text-align: center;
        }
        .message-box {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background-color: #10b981;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 1000;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #3b82f6;
            border-radius: 50%;
            width: 2rem;
            height: 2rem;
            animation: spin 1s linear infinite;
            display: none;
            margin: 0 auto;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .hidden-feature {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <div class="container">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">Radiosender-Finder & Ratespiel</h1>
        <p class="text-gray-600 mb-6">W√§hlen Sie Land und Bundesland aus, um einen Sender zu suchen oder seine Frequenz zu erraten.</p>
        
        <div class="mb-4">
            <select id="countrySelect" class="w-full px-4 py-3 text-lg text-gray-700 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200">
                <option value="">Bitte Land w√§hlen...</option>
                <option value="Deutschland">Deutschland</option>
                <option value="√ñsterreich">√ñsterreich</option>
                <option value="Schweiz">Schweiz</option>
            </select>
        </div>

        <div class="mb-6">
            <select id="stateSelect" class="w-full px-4 py-3 text-lg text-gray-700 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200" disabled>
                <option value="">Bitte Bundesland w√§hlen...</option>
            </select>
        </div>

        <div class="flex items-center justify-center mb-6">
            <input type="text" id="frequencyInput" placeholder="z.B. 95.2" class="w-full px-4 py-3 text-lg text-gray-700 bg-gray-50 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200">
            <span class="ml-2 text-xl font-semibold text-gray-700">MHz</span>
        </div>
        
        <div class="flex flex-col space-y-4">
            <button id="searchButton" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-105">
                Frequenz suchen
            </button>
            <button id="gameButton" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-105">
                Ratespiel starten
            </button>
        </div>

        <div id="loadingIndicator" class="loading-spinner mt-4"></div>

        <div id="result" class="mt-8">
            <p class="text-gray-500 text-lg">
                Das Ergebnis wird hier angezeigt.
            </p>
        </div>

        <div id="coolFeatures" class="hidden-feature mt-8 pt-4 border-t border-gray-200">
            <button id="senderInfoButton" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-105">
                üåê Sender-Info
            </button>
        </div>

        <div class="mt-8 pt-4 border-t border-gray-200">
            <h3 class="text-xl font-bold text-gray-700 mb-2">Hinweis zur Senderliste</h3>
            <p class="text-sm text-gray-500">
                Diese Version ist ein interaktives Spiel und verwendet keine externe API.
            </p>
        </div>
    </div>

    <div id="message-box" class="message-box"></div>

    <script>
        // Funktion zum Anzeigen von Nachrichten
        function showMessage(message, duration = 3000) {
            const msgBox = document.getElementById('message-box');
            msgBox.textContent = message;
            msgBox.style.opacity = '1';
            setTimeout(() => {
                msgBox.style.opacity = '0';
            }, duration);
        }

        // Element-Referenzen
        const countrySelect = document.getElementById('countrySelect');
        const stateSelect = document.getElementById('stateSelect');
        const frequencyInput = document.getElementById('frequencyInput');
        const resultElement = document.getElementById('result');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const searchButton = document.getElementById('searchButton');
        const gameButton = document.getElementById('gameButton');
        const coolFeatures = document.getElementById('coolFeatures');
        const senderInfoButton = document.getElementById('senderInfoButton');

        // Globale Variablen
        let currentStation = null;
        let isGameMode = false;
        const tolerance = 0.01;
        
        // Simulated radio station data with URLs
        const allRadioStations = [
            // Deutschland
            { frequency: 88.8, name: 'radioeins', country: 'Deutschland', state: 'Berlin', url: 'https://www.radioeins.de/' },
            { frequency: 93.6, name: '104.6 RTL', country: 'Deutschland', state: 'Berlin', url: 'https://www.104.6rtl.com/' },
            { frequency: 95.8, name: 'rbb 88.8', country: 'Deutschland', state: 'Berlin', url: 'https://www.rbb-online.de/rbb888/' },
            { frequency: 90.0, name: '90elf', country: 'Deutschland', state: 'Berlin' },
            { frequency: 106.0, name: 'JAM FM', country: 'Deutschland', state: 'Berlin', url: 'https://www.jamfm.de/' },
            { frequency: 107.5, name: 'Deutschlandfunk', country: 'Deutschland', state: '√úberregional', url: 'https://www.deutschlandfunk.de/' },
            { frequency: 95.2, name: 'Antenne Bayern', country: 'Deutschland', state: 'Bayern', url: 'https://www.antenne.de/' },
            { frequency: 89.0, name: 'Bayern 3', country: 'Deutschland', state: 'Bayern', url: 'https://www.br.de/radio/bayern3/' },
            { frequency: 93.2, name: 'egoFM', country: 'Deutschland', state: 'Bayern', url: 'https://www.egofm.de/' },
            { frequency: 105.3, name: 'Radio Gong W√ºrzburg', country: 'Deutschland', state: 'Bayern', url: 'https://www.radiogong.com/' },
            { frequency: 97.2, name: 'radio B2', country: 'Deutschland', state: 'Brandenburg', url: 'https://www.radiob2.de/' },
            { frequency: 101.9, name: 'BB Radio', country: 'Deutschland', state: 'Brandenburg', url: 'https://www.bbradio.de/' },
            { frequency: 93.4, name: 'Hit Radio FFH', country: 'Deutschland', state: 'Hessen', url: 'https://www.ffh.de/' },
            { frequency: 94.0, name: 'harmony.fm', country: 'Deutschland', state: 'Hessen', url: 'https://www.harmonyfm.de/' },
            { frequency: 99.2, name: 'Radio Hamburg', country: 'Deutschland', state: 'Hamburg', url: 'https://www.radiohamburg.de/' },
            { frequency: 90.3, name: 'NDR 90,3', country: 'Deutschland', state: 'Hamburg', url: 'https://www.ndr.de/ndr903/' },
            { frequency: 94.3, name: 'Radio Hochstift', country: 'Deutschland', state: 'Nordrhein-Westfalen', url: 'https://www.radiohochstift.de/' },
            { frequency: 102.7, name: 'Radio NRW', country: 'Deutschland', state: 'Nordrhein-Westfalen', url: 'https://www.radionrw.de/' },
            { frequency: 90.1, name: 'bigFM', country: 'Deutschland', state: 'Rheinland-Pfalz', url: 'https://www.bigfm.de/' },
            { frequency: 105.7, name: 'RPR1', country: 'Deutschland', state: 'Rheinland-Pfalz', url: 'https://www.rpr1.de/' },
            { frequency: 100.0, name: 'Radio Regenbogen', country: 'Deutschland', state: 'Baden-W√ºrttemberg', url: 'https://www.regenbogen.de/' },
            { frequency: 97.1, name: 'SWR1 Baden-W√ºrttemberg', country: 'Deutschland', state: 'Baden-W√ºrttemberg', url: 'https://www.swr.de/swr1-bw/' },
            { frequency: 90.8, name: 'MDR Jump', country: 'Deutschland', state: 'Sachsen', url: 'https://www.mdr.de/mdr-jump/' },
            { frequency: 100.8, name: 'Radio PSR', country: 'Deutschland', state: 'Sachsen', url: 'https://www.radiopsr.de/' },
            { frequency: 99.4, name: 'Antenne Niedersachsen', country: 'Deutschland', state: 'Niedersachsen', url: 'https://www.antenne.com/' },
            { frequency: 90.0, name: 'NDR 1 Niedersachsen', country: 'Deutschland', state: 'Niedersachsen', url: 'https://www.ndr.de/ndr1niedersachsen/' },
            { frequency: 98.7, name: 'R.SH', country: 'Deutschland', state: 'Schleswig-Holstein', url: 'https://www.rsh.de/' },
            { frequency: 92.4, name: 'Radio Bremen Eins', country: 'Deutschland', state: 'Bremen', url: 'https://www.radiobremen.de/bremeneins/' },
            { frequency: 106.5, name: 'Radio Bremen Vier', country: 'Deutschland', state: 'Bremen', url: 'https://www.radiobremen.de/bremenvier/' },
            { frequency: 96.9, name: 'Antenne MV', country: 'Deutschland', state: 'Mecklenburg-Vorpommern', url: 'https://www.antennemv.de/' },
            { frequency: 102.0, name: 'Ostseewelle', country: 'Deutschland', state: 'Mecklenburg-Vorpommern', url: 'https://www.ostseewelle.de/' },
            { frequency: 100.6, name: 'SR 1', country: 'Deutschland', state: 'Saarland', url: 'https://www.sr.de/sr1/' },
            { frequency: 93.8, name: 'Radio Sal√º', country: 'Deutschland', state: 'Saarland', url: 'https://www.salue.de/' },
            { frequency: 91.5, name: 'MDR Jump', country: 'Deutschland', state: 'Sachsen-Anhalt', url: 'https://www.mdr.de/mdr-jump/' },
            { frequency: 94.6, name: 'Radio SAW', country: 'Deutschland', state: 'Sachsen-Anhalt', url: 'https://www.radiosaw.de/' },
            { frequency: 95.0, name: 'MDR Th√ºringen', country: 'Deutschland', state: 'Th√ºringen', url: 'https://www.mdr.de/mdr-thueringen/' },
            { frequency: 99.0, name: 'Antenne Th√ºringen', country: 'Deutschland', state: 'Th√ºringen', url: 'https://www.antennethueringen.de/' },
            { frequency: 91.7, name: 'Radio Brocken', country: 'Deutschland', state: 'Sachsen-Anhalt', url: 'https://www.radio-brocken.de/' },
            { frequency: 103.8, name: 'Antenne 1', country: 'Deutschland', state: 'Baden-W√ºrttemberg', url: 'https://www.antenne1.de/' },
            // √ñsterreich
            { frequency: 98.4, name: '√ñ3', country: '√ñsterreich', state: 'Wien', url: 'https://oe3.orf.at/' },
            { frequency: 99.1, name: 'FM4', country: '√ñsterreich', state: 'Wien', url: 'https://fm4.orf.at/' },
            { frequency: 99.0, name: 'Radio 88.6', country: '√ñsterreich', state: 'Wien', url: 'https://www.radio886.at/' },
            { frequency: 103.5, name: 'Radio Wien', country: '√ñsterreich', state: 'Wien', url: 'https://wien.orf.at/radio/' },
            { frequency: 105.8, name: 'Radio Arabella', country: '√ñsterreich', state: 'Wien', url: 'https://www.radioarabella.at/' },
            { frequency: 106.5, name: 'Radio Superfly', country: '√ñsterreich', state: 'Wien', url: 'https://superfly.fm/' },
            { frequency: 107.0, name: 'Radio Energy Wien', country: '√ñsterreich', state: 'Wien', url: 'https://www.energy.at/' },
            { frequency: 107.0, name: 'Radio Energy Wien - Dance', country: '√ñsterreich', state: 'Wien' },
            { frequency: 107.0, name: 'Radio Energy Wien - Fitness', country: '√ñsterreich', state: 'Wien' },
            { frequency: 107.0, name: 'Radio Energy Wien - Hits', country: '√ñsterreich', state: 'Wien' },
            { frequency: 107.0, name: 'Radio Energy Wien - Lounge', country: '√ñsterreich', state: 'Wien' },
            { frequency: 107.0, name: 'Radio Energy Wien - Pop', country: '√ñsterreich', state: 'Wien' },
            { frequency: 107.0, name: 'Radio Energy Wien - R&B', country: '√ñsterreich', state: 'Wien' },
            { frequency: 107.0, name: 'Radio Energy Wien - Rock', country: '√ñsterreich', state: 'Wien' },
            { frequency: 92.0, name: 'Kronehit', country: '√ñsterreich', state: '√úberregional', url: 'https://www.kronehit.at/' },
            { frequency: 88.8, name: '√ñ3', country: '√ñsterreich', state: 'Ober√∂sterreich', url: 'https://oe3.orf.at/' },
            { frequency: 90.5, name: 'Life Radio', country: '√ñsterreich', state: 'Ober√∂sterreich', url: 'https://www.liferadio.at/' },
            { frequency: 95.2, name: 'Radio Ober√∂sterreich', country: '√ñsterreich', state: 'Ober√∂sterreich', url: 'https://ooe.orf.at/radio/' },
            { frequency: 101.9, name: 'Welle 1', country: '√ñsterreich', state: 'Ober√∂sterreich', url: 'https://www.welle1.at/' },
            { frequency: 93.3, name: 'Radio Tirol', country: '√ñsterreich', state: 'Tirol', url: 'https://tirol.orf.at/radio/' },
            { frequency: 91.7, name: '√ñ3', country: '√ñsterreich', state: 'Tirol', url: 'https://oe3.orf.at/' },
            { frequency: 105.7, name: 'Antenne Tirol', country: '√ñsterreich', state: 'Tirol', url: 'https://www.antennetirol.at/' },
            { frequency: 92.5, name: 'Radio U1 Tirol', country: '√ñsterreich', state: 'Tirol', url: 'https://www.u1-radio.at/' },
            { frequency: 107.5, name: 'Hitradio √ñ3', country: '√ñsterreich', state: 'Tirol', url: 'https://oe3.orf.at/' },
            { frequency: 106.5, name: 'Radio Technikum', country: '√ñsterreich', state: 'Tirol', url: 'https://www.technikum-radio.at/' },
            { frequency: 106.5, name: 'Radio Technikum - Hit Classics', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 106.5, name: 'Radio Technikum - Rock Cockpit', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 106.5, name: 'Radio Technikum - Smooth Jazz', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 97.8, name: 'Antenne Steiermark', country: '√ñsterreich', state: 'Steiermark', url: 'https://www.antenne.at/' },
            { frequency: 99.3, name: 'Radio Graz', country: '√ñsterreich', state: 'Steiermark', url: 'https://www.antenne.at/' },
            { frequency: 107.0, name: 'Soundportal', country: '√ñsterreich', state: 'Steiermark', url: 'https://www.soundportal.at/' },
            { frequency: 106.6, name: 'Radio Helsinki', country: '√ñsterreich', state: 'Steiermark', url: 'https://www.radiohelsinki.at/' },
            { frequency: 95.7, name: 'Radio Burgenland', country: '√ñsterreich', state: 'Burgenland', url: 'https://burgenland.orf.at/radio/' },
            { frequency: 94.6, name: 'FM4', country: '√ñsterreich', state: 'Burgenland', url: 'https://fm4.orf.at/' },
            { frequency: 94.7, name: 'Antenne K√§rnten', country: '√ñsterreich', state: 'K√§rnten', url: 'https://www.antenne.at/' },
            { frequency: 97.9, name: 'Radio K√§rnten', country: '√ñsterreich', state: 'K√§rnten', url: 'https://kaernten.orf.at/radio/' },
            { frequency: 101.4, name: 'Radio Nieder√∂sterreich', country: '√ñsterreich', state: 'Nieder√∂sterreich', url: 'https://noe.orf.at/radio/' },
            { frequency: 93.0, name: '√ñ3', country: '√ñsterreich', state: 'Nieder√∂sterreich', url: 'https://oe3.orf.at/' },
            { frequency: 96.7, name: 'Radio Salzburg', country: '√ñsterreich', state: 'Salzburg', url: 'https://salzburg.orf.at/radio/' },
            { frequency: 91.7, name: 'Antenne Salzburg', country: '√ñsterreich', state: 'Salzburg', url: 'https://www.antenne.at/' },
            { frequency: 91.3, name: 'Antenne Steiermark', country: '√ñsterreich', state: 'Steiermark', url: 'https://www.antenne.at/' },
            { frequency: 105.7, name: 'Antenne Tirol', country: '√ñsterreich', state: 'Tirol', url: 'https://www.antennetirol.at/' },
            { frequency: 99.7, name: 'Antenne Vorarlberg', country: '√ñsterreich', state: 'Vorarlberg', url: 'https://www.antennevorarlberg.at/' },
            { frequency: 98.7, name: 'ORF Radio Vorarlberg', country: '√ñsterreich', state: 'Vorarlberg', url: 'https://vorarlberg.orf.at/radio/' },
            { frequency: 90.0, name: 'Freie Welle', country: '√ñsterreich', state: 'Wien' },
            { frequency: 95.2, name: 'Radio FREI', country: '√ñsterreich', state: 'Wien' },
            { frequency: 106.4, name: 'Harmonie', country: '√ñsterreich', state: 'Wien' },
            { frequency: 92.6, name: 'Radio Helsinki', country: '√ñsterreich', state: 'Wien' },
            { frequency: 90.0, name: 'Radio Klassik Stephansdom', country: '√ñsterreich', state: 'Wien' },
            { frequency: 90.0, name: 'Radio Lammertal', country: '√ñsterreich', state: 'Salzburg' },
            { frequency: 94.8, name: 'Radio Maria √ñsterreich', country: '√ñsterreich', state: 'Wien' },
            { frequency: 90.0, name: 'Radio Max - BIG CITY LIVE', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 90.0, name: 'Radio Max - MERKUR LIVE', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 90.0, name: 'Radio Max - PENNY LIVE', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 90.0, name: 'Radio Max - Radio BILLA', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 90.0, name: 'Radio Max - Radio BIPA', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 92.8, name: 'Radio M√ºrztaal', country: '√ñsterreich', state: 'Steiermark' },
            { frequency: 92.4, name: 'Radio OP', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 97.4, name: 'Radio Osttirol', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 102.3, name: 'Radio PL1', country: '√ñsterreich', state: 'K√§rnten' },
            { frequency: 97.5, name: '√ñ1', country: '√ñsterreich', state: 'Ober√∂sterreich', url: 'https://oe1.orf.at/' },
            { frequency: 105.7, name: 'Radio RF1', country: '√ñsterreich', state: 'Nieder√∂sterreich' },
            { frequency: 91.4, name: 'Radio Seefunk', country: '√ñsterreich', state: 'Vorarlberg' },
            { frequency: 95.5, name: 'Radio Soundportal', country: '√ñsterreich', state: 'Steiermark', url: 'https://www.soundportal.at/' },
            { frequency: 95.2, name: 'Radio St. Florian am Inn', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 104.9, name: 'Radio U1 Tirol', country: '√ñsterreich', state: 'Tirol', url: 'https://www.u1-radio.at/' },
            { frequency: 95.4, name: 'Radio Uno', country: '√ñsterreich', state: 'Wien' },
            { frequency: 98.4, name: 'Radio Val Canale', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 98.1, name: 'Radio Volksmusik', country: '√ñsterreich', state: 'Nieder√∂sterreich' },
            { frequency: 95.8, name: 'Radio Waltl', country: '√ñsterreich', state: 'K√§rnten' },
            { frequency: 104.9, name: 'Radio Weiss Rot', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 107.0, name: 'Radiofabrik', country: '√ñsterreich', state: 'Salzburg', url: 'https://www.radiofabrik.at/' },
            { frequency: 95.2, name: 'radiomix.at - Kanal 01', country: '√ñsterreich', state: 'Wien' },
            { frequency: 94.4, name: 'Radio Ypsilon', country: '√ñsterreich', state: 'Nieder√∂sterreich' },
            { frequency: 106.6, name: 'republic.cafe', country: '√ñsterreich', state: 'Steiermark' },
            { frequency: 106.9, name: 'Respect', country: '√ñsterreich', state: 'Wien' },
            { frequency: 99.1, name: 'RSF1', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 99.4, name: 'Seestadtradio', country: '√ñsterreich', state: 'Wien' },
            { frequency: 99.0, name: 'SMC-Radio Austria', country: '√ñsterreich', state: 'Wien' },
            { frequency: 94.4, name: 'Spirit Live Radio', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 102.5, name: 'Stahlradio', country: '√ñsterreich', state: 'Wien' },
            { frequency: 98.6, name: 'Starlight Radio', country: '√ñsterreich', state: 'Wien' },
            { frequency: 95.9, name: 'Sternenfeuer-Radio', country: '√ñsterreich', state: 'Steiermark' },
            { frequency: 90.0, name: 'Studio Enns', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 102.1, name: 'TRAP.FM', country: '√ñsterreich', state: 'Steiermark' },
            { frequency: 102.1, name: 'T-Rock', country: '√ñsterreich', state: 'Steiermark' },
            { frequency: 92.8, name: 'Unzmarkt-Frauenburg LIVE', country: '√ñsterreich', state: 'Steiermark' },
            { frequency: 98.4, name: 'VIENNA.AT - 80er', country: '√ñsterreich', state: 'Wien' },
            { frequency: 98.4, name: 'VIENNA.AT - 90er', country: '√ñsterreich', state: 'Wien' },
            { frequency: 98.4, name: 'VIENNA.AT - Lounge', country: '√ñsterreich', state: 'Wien' },
            { frequency: 98.4, name: 'VIENNA.AT - Partymix', country: '√ñsterreich', state: 'Wien' },
            { frequency: 98.4, name: 'Wattens.FM', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 98.4, name: 'webRadio.Tirol', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 101.9, name: 'Welle 1 Graz', country: '√ñsterreich', state: 'Steiermark', url: 'https://www.welle1.at/' },
            { frequency: 101.9, name: 'Welle 1 K√§rnten', country: '√ñsterreich', state: 'K√§rnten', url: 'https://www.welle1.at/' },
            { frequency: 101.9, name: 'Welle 1 Ober√∂sterreich', country: '√ñsterreich', state: 'Ober√∂sterreich', url: 'https://www.welle1.at/' },
            { frequency: 101.9, name: 'Welle 1 Salzburg', country: '√ñsterreich', state: 'Salzburg', url: 'https://www.welle1.at/' },
            { frequency: 101.9, name: 'Welle 1 Tirol', country: '√ñsterreich', state: 'Tirol', url: 'https://www.welle1.at/' },
            { frequency: 101.9, name: 'Welle 1 Tirol - AMS', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 101.9, name: 'Welle 1 Tirol - Black', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 101.9, name: 'Welle 1 Tirol - Club', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 101.9, name: 'Welle 1 Tirol - Lounge', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 101.9, name: 'Welle 1 Tirol - Pop', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 101.9, name: 'Welle 1 Tirol - Rock', country: '√ñsterreich', state: 'Tirol' },
            { frequency: 101.9, name: 'Welle Murtal', country: '√ñsterreich', state: 'Steiermark' },
            { frequency: 101.9, name: 'WelleFM', country: '√ñsterreich', state: 'Wien' },
            { frequency: 106.8, name: 'Freies Radio Salzkammergut', country: '√ñsterreich', state: 'Ober√∂sterreich', url: 'https://www.freiesradio.at/' },
            { frequency: 101.8, name: '√ñ1', country: '√ñsterreich', state: '√úberregional', url: 'https://oe1.orf.at/' },
            { frequency: 93.6, name: 'FM4', country: '√ñsterreich', state: '√úberregional', url: 'https://fm4.orf.at/' },
            { frequency: 90.0, name: 'Radio OO', country: '√ñsterreich', state: 'Ober√∂sterreich' },
            { frequency: 95.4, name: 'Radio Wien', country: '√ñsterreich', state: 'Wien', url: 'https://wien.orf.at/radio/' },
            { frequency: 101.8, name: 'Radio Tirol', country: '√ñsterreich', state: 'Tirol', url: 'https://tirol.orf.at/radio/' },
            { frequency: 98.7, name: 'Radio Vorarlberg', country: '√ñsterreich', state: 'Vorarlberg', url: 'https://vorarlberg.orf.at/radio/' },
            { frequency: 96.7, name: 'Radio Salzburg', country: '√ñsterreich', state: 'Salzburg', url: 'https://salzburg.orf.at/radio/' },
            { frequency: 91.3, name: 'Radio Steiermark', country: '√ñsterreich', state: 'Steiermark', url: 'https://steiermark.orf.at/radio/' },
            { frequency: 101.4, name: 'Radio Nieder√∂sterreich', country: '√ñsterreich', state: 'Nieder√∂sterreich', url: 'https://noe.orf.at/radio/' },
            { frequency: 94.7, name: 'Radio K√§rnten', country: '√ñsterreich', state: 'K√§rnten', url: 'https://kaernten.orf.at/radio/' },
            { frequency: 102.1, name: 'Radio Burgenland', country: '√ñsterreich', state: 'Burgenland', url: 'https://burgenland.orf.at/radio/' },
            { frequency: 103.1, name: 'Antenne K√§rnten', country: '√ñsterreich', state: 'K√§rnten', url: 'https://www.antenne.at/' },
            { frequency: 91.7, name: 'Antenne Salzburg', country: '√ñsterreich', state: 'Salzburg', url: 'https://www.antenne.at/' },
            { frequency: 91.3, name: 'Antenne Steiermark', country: '√ñsterreich', state: 'Steiermark', url: 'https://www.antenne.at/' },
            { frequency: 105.7, name: 'Antenne Tirol', country: '√ñsterreich', state: 'Tirol', url: 'https://www.antennetirol.at/' },
            { frequency: 99.7, name: 'Antenne Vorarlberg', country: '√ñsterreich', state: 'Vorarlberg', url: 'https://www.antennevorarlberg.at/' },
            { frequency: 98.7, name: 'ORF Radio Vorarlberg', country: '√ñsterreich', state: 'Vorarlberg', url: 'https://vorarlberg.orf.at/radio/' },
            { frequency: 104.1, name: 'Radio Burgenland', country: '√ñsterreich', state: 'Burgenland', url: 'https://burgenland.orf.at/radio/' },
            { frequency: 105.2, name: 'Radio Nieder√∂sterreich', country: '√ñsterreich', state: 'Nieder√∂sterreich', url: 'https://noe.orf.at/radio/' },
            { frequency: 105.6, name: 'Radio K√§rnten', country: '√ñsterreich', state: 'K√§rnten', url: 'https://kaernten.orf.at/radio/' },
            { frequency: 92.5, name: 'Radio Nieder√∂sterreich', country: '√ñsterreich', state: 'Nieder√∂sterreich', url: 'https://noe.orf.at/radio/' },
            // Schweiz
            { frequency: 100.2, name: 'Radio Z√ºrisee', country: 'Schweiz', state: 'Z√ºrich', url: 'https://www.radio.ch/radiozuerisee/' },
            { frequency: 105.7, name: 'Radio Pilatus', country: 'Schweiz', state: 'Luzern', url: 'https://www.radio.ch/radiopilatus/' },
            { frequency: 106.8, name: 'SRF 1', country: 'Schweiz', state: '√úberregional', url: 'https://www.srf.ch/radio-srf-1' },
            { frequency: 95.9, name: 'Radio 24', country: 'Schweiz', state: 'Z√ºrich', url: 'https://www.radio24.ch/' },
            { frequency: 102.3, name: 'Radio Fribourg', country: 'Schweiz', state: 'Freiburg', url: 'https://www.radiofr.ch/' },
            { frequency: 104.0, name: 'Radio Bern 1', country: 'Schweiz', state: 'Bern', url: 'https://www.radiobern1.ch/' },
            { frequency: 94.5, name: 'Radio Basel', country: 'Schweiz', state: 'Basel-Stadt', url: 'https://www.radiobasel.ch/' },
            { frequency: 98.7, name: 'Radio Argovia', country: 'Schweiz', state: 'Aargau', url: 'https://www.radioargovia.ch/' },
            { frequency: 100.0, name: 'RTS La Premi√®re', country: 'Schweiz', state: 'Genf', url: 'https://www.rts.ch/la-1ere/' },
            { frequency: 96.6, name: 'Radio FM1', country: 'Schweiz', state: 'St. Gallen', url: 'https://www.radiofm1.ch/' },
            { frequency: 101.6, name: 'Radio 32', country: 'Schweiz', state: 'Solothurn', url: 'https://www.radio32.ch/' },
            { frequency: 92.8, name: 'Radio Sunshine', country: 'Schweiz', state: 'Z√ºrich', url: 'https://www.radiosunshine.ch/' },
            { frequency: 103.8, name: 'Radio BeO', country: 'Schweiz', state: 'Bern', url: 'https://www.radiobeo.ch/' },
            { frequency: 105.0, name: 'SRF 3', country: 'Schweiz', state: 'Z√ºrich', url: 'https://www.srf.ch/radio-srf-3' },
            { frequency: 98.1, name: 'Radio Rottu', country: 'Schweiz', state: 'Wallis', url: 'https://www.radiorottu.ch/' },
            { frequency: 96.3, name: 'Radio Basilisk', country: 'Schweiz', state: 'Basel-Stadt', url: 'https://www.radiobasilisk.ch/' },
            { frequency: 94.2, name: 'Radio Grischa', country: 'Schweiz', state: 'Graub√ºnden', url: 'https://www.radiogrischa.ch/' },
            { frequency: 91.1, name: 'Radio Canal 3', country: 'Schweiz', state: 'Bern', url: 'https://www.canal3.ch/' },
            { frequency: 90.5, name: 'Radio LFM', country: 'Schweiz', state: 'Tessin', url: 'https://www.lfm.ch/' },
            { frequency: 99.5, name: 'Radio SRF Musikwelle', country: 'Schweiz', state: '√úberregional', url: 'https://www.srf.ch/radio-srf-musikwelle' },
            { frequency: 102.8, name: 'Radio Fribourg', country: 'Schweiz', state: 'Freiburg', url: 'https://www.radiofr.ch/' },
            { frequency: 103.1, name: 'Radio Fr√©quence Banane', country: 'Schweiz', state: 'Waadt', url: 'https://www.frequencebanane.ch/' },
        ];
        
        // Liste der Bundesl√§nder/Kantone pro Land
        const statesByCountry = {
            'Deutschland': [
                'Bitte Bundesland w√§hlen...', 'Baden-W√ºrttemberg', 'Bayern', 'Berlin', 'Brandenburg', 'Bremen', 'Hamburg', 'Hessen', 'Mecklenburg-Vorpommern', 'Niedersachsen', 'Nordrhein-Westfalen', 'Rheinland-Pfalz', 'Saarland', 'Sachsen', 'Sachsen-Anhalt', 'Schleswig-Holstein', 'Th√ºringen', '√úberregional'
            ],
            '√ñsterreich': [
                'Bitte Bundesland w√§hlen...', 'Burgenland', 'K√§rnten', 'Nieder√∂sterreich', 'Ober√∂sterreich', 'Salzburg', 'Steiermark', 'Tirol', 'Vorarlberg', 'Wien', '√úberregional'
            ],
            'Schweiz': [
                'Bitte Kanton w√§hlen...', 'Aargau', 'Appenzell Ausserrhoden', 'Appenzell Innerrhoden', 'Basel-Landschaft', 'Basel-Stadt', 'Bern', 'Freiburg', 'Genf', 'Glarus', 'Graub√ºnden', 'Jura', 'Luzern', 'Neuenburg', 'Nidwalden', 'Obwalden', 'Schaffhausen', 'Schwyz', 'Solothurn', 'St. Gallen', 'Tessin', 'Thurgau', 'Uri', 'Waadt', 'Wallis', 'Zug', 'Z√ºrich', '√úberregional'
            ]
        };

        // Funktion zum Aktualisieren des Bundesland-Dropdown-Men√ºs
        function updateStateSelect() {
            const selectedCountry = countrySelect.value;
            stateSelect.innerHTML = '';
            
            resultElement.innerHTML = `<p class="text-gray-500 text-lg">Das Ergebnis wird hier angezeigt.</p>`;
            coolFeatures.classList.add('hidden-feature');
            currentStation = null;
            searchButton.style.display = 'block';
            gameButton.style.display = 'block';
            frequencyInput.value = '';

            // Wenn ein Land ausgew√§hlt ist, f√ºlle das Bundesland-Dropdown-Men√º und aktiviere es
            if (selectedCountry) {
                const states = statesByCountry[selectedCountry];
                if (states) {
                    states.forEach(state => {
                        const option = document.createElement('option');
                        option.value = state;
                        option.textContent = state;
                        stateSelect.appendChild(option);
                    });
                    stateSelect.disabled = false;
                }
            } else {
                 const option = document.createElement('option');
                 option.value = "";
                 option.textContent = "Bitte Bundesland w√§hlen...";
                 stateSelect.appendChild(option);
                 stateSelect.disabled = true;
            }
        }

        // Funktion zum Starten des Ratespiels
        function startGame() {
            const country = countrySelect.value;
            const state = stateSelect.value;
            
            if (!country || !state || state.startsWith('Bitte')) {
                showMessage("Bitte w√§hlen Sie zuerst ein g√ºltiges Land und Bundesland aus.", 4000);
                return;
            }

            const availableStations = allRadioStations.filter(s =>
                s.country === country && s.state === state
            );
            
            if (availableStations.length === 0) {
                resultElement.innerHTML = `<p class="text-red-500 text-xl font-semibold mb-2">Keine Sender in dieser Region gefunden.</p>`;
                coolFeatures.classList.add('hidden-feature');
                return;
            }

            const randomIndex = Math.floor(Math.random() * availableStations.length);
            currentStation = availableStations[randomIndex];
            isGameMode = true;
            
            resultElement.innerHTML = `
                <p class="text-gray-700 text-xl font-semibold mb-2">Ratespiel gestartet!</p>
                <p class="text-gray-600">Ich habe mir einen Sender in ${state}, ${country} ausgedacht. Versuchen Sie, die Frequenz zu erraten.</p>
            `;
            coolFeatures.classList.add('hidden-feature');
            searchButton.style.display = 'none';
            gameButton.style.display = 'none';
            
            // Neuer 'Raten' Button
            const guessButton = document.createElement('button');
            guessButton.id = 'guessButton';
            guessButton.textContent = 'Frequenz raten';
            guessButton.className = 'w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-105 mt-4';
            resultElement.appendChild(guessButton);
            guessButton.addEventListener('click', checkGuess);
        }

        // Funktion zur Frequenz-Ratepr√ºfung
        function checkGuess() {
            const frequencyStr = frequencyInput.value;
            if (!currentStation || !frequencyStr) {
                showMessage("Bitte geben Sie eine Frequenz ein.", 4000);
                return;
            }

            const frequency = parseFloat(frequencyStr.replace(',', '.'));
            if (isNaN(frequency)) {
                showMessage("Ung√ºltige Frequenz. Bitte geben Sie eine Zahl ein.", 4000);
                return;
            }

            const diff = Math.abs(currentStation.frequency - frequency);

            if (diff < tolerance) {
                resultElement.innerHTML = `
                    <p class="text-green-600 text-3xl font-bold mb-2">Richtig!</p>
                    <p class="text-gray-800 text-xl">Der Sender war: <span class="font-bold">${currentStation.name}</span></p>
                    <p class="text-gray-600 text-lg">Frequenz: ${currentStation.frequency.toFixed(1)} MHz</p>
                    <button id="restartButton" class="w-full mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-105">
                        Neues Spiel starten
                    </button>
                `;
                document.getElementById('restartButton').addEventListener('click', () => {
                    isGameMode = false;
                    currentStation = null;
                    frequencyInput.value = '';
                    resultElement.innerHTML = `<p class="text-gray-500 text-lg">Das Ergebnis wird hier angezeigt.</p>`;
                    searchButton.style.display = 'block';
                    gameButton.style.display = 'block';
                    coolFeatures.classList.add('hidden-feature');
                    
                    // Entferne den dynamischen Ratespiel-Button
                    const guessButton = document.getElementById('guessButton');
                    if(guessButton) guessButton.remove();
                });
            } else if (frequency < currentStation.frequency) {
                resultElement.innerHTML = `<p class="text-yellow-600 text-xl font-semibold">Ihre Frequenz ist zu niedrig. Versuchen Sie es mit einer h√∂heren.</p>`;
            } else {
                resultElement.innerHTML = `<p class="text-yellow-600 text-xl font-semibold">Ihre Frequenz ist zu hoch. Versuchen Sie es mit einer niedrigeren.</p>`;
            }
        }
        
        // Funktion zum Suchen eines zuf√§lligen Senders
        function searchStation() {
            const country = countrySelect.value;
            const state = stateSelect.value;
            const frequencyStr = frequencyInput.value;

            if (!country || !state || state.startsWith('Bitte')) {
                showMessage("Bitte w√§hlen Sie zuerst ein g√ºltiges Land und Bundesland aus.", 4000);
                return;
            }

            if (!frequencyStr) {
                 showMessage("Bitte geben Sie eine Frequenz ein.", 4000);
                 return;
            }

            const frequency = parseFloat(frequencyStr.replace(',', '.'));
            if (isNaN(frequency)) {
                showMessage("Ung√ºltige Frequenz. Bitte geben Sie eine Zahl ein.", 4000);
                return;
            }

            const stations = allRadioStations.filter(s =>
                s.country === country && s.state === state && Math.abs(s.frequency - frequency) < tolerance
            );

            if (stations.length > 0) {
                currentStation = stations[0];
                resultElement.innerHTML = `
                    <p class="text-gray-700 text-xl font-semibold mb-2">Sender gefunden!</p>
                    <p class="text-gray-900 text-2xl font-bold">${currentStation.name}</p>
                    <p class="text-gray-600">${currentStation.country}, ${currentStation.state}</p>
                `;
                coolFeatures.classList.remove('hidden-feature');
            } else {
                resultElement.innerHTML = `
                    <p class="text-red-500 text-xl font-semibold mb-2">Kein Sender gefunden.</p>
                    <p class="text-gray-500">√úberpr√ºfen Sie Ihre Eingabe.</p>
                `;
                coolFeatures.classList.add('hidden-feature');
                currentStation = null;
            }
        }
        
        // Event Listener f√ºr Sender-Info-Button
        senderInfoButton.addEventListener('click', () => {
            if (currentStation) {
                if (currentStation.url) {
                    window.open(currentStation.url, '_blank');
                } else {
                    showMessage("F√ºr diesen Radiosender gibt es leider keine Webseite.");
                }
            } else {
                showMessage("W√§hlen Sie zuerst einen Sender aus.");
            }
        });

        // Event Listener f√ºr die Buttons
        searchButton.addEventListener('click', searchStation);
        gameButton.addEventListener('click', startGame);
        
        // Event Listener f√ºr die Frequenz-Eingabe (Enter-Taste)
        frequencyInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (isGameMode) {
                    const guessButton = document.getElementById('guessButton');
                    if(guessButton) guessButton.click();
                } else {
                    searchStation();
                }
            }
        });
        
        // Initialisierung des Bundesland-Dropdown-Men√ºs
        countrySelect.addEventListener('change', updateStateSelect);
        updateStateSelect();
    </script>
</body>
</html>
